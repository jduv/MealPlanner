<!DOCTYPE html>
<html>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<head>
		<title>Meal Planner</title>
	</head>
	<body>
		<p> Hello World! </p>
		<button id="clickMe">Click Me!</button>

		<div id="app"></div>

		<!-- Script includes -->
		<script src="js/jquery-1.9.1.min.js"></script>
		<script src="js/jquery-migrate-1.1.1.min.js"></script>
		<script src="js/icanhaz-0.10.2.min.js"></script>
		<script src="js/sammy-0.7.4.min.js"></script>
		<script src="js/angular-1.0.5.min.js"></script>
		<script src="js/mealplanner-0.0.1.js"></script>
		<script>
			// Wire up everything.
			$(document).ready(function () {
				$("#clickMe").click(function () {
					alert("Hi!");
				});

				loadTemplates(runApp);
			});

			// Loads templates.
			function loadTemplates(success)
			{
				$.get("./tpl/templates.html")
				 .done(function(data) {
						// append templates to the end of the body tag
						$("head").append(data);

						// boot ICH, removes loaded templates from DOM once built.
						ich.grabTemplates();
						success();
					})
				 .fail(function() {
				 	$("#app").append("Error loading templates!")
				 });
			}

			// Runs the app. Call after templates are loaded.
			function runApp()
			{
				// Add main sammy route
				var app = $.sammy("#main", function() {
					this.get("#/", function(context) {
						var data = [{ name : "jduv" },  { name : "judy" }, { name : "griffin" }];
						data.forEach(function(entry, idx) {
							var user = ich.test(entry);
							$("#app").append(user);
						})
					});
				});

				// Run the application
				app.run("#/");
			}
		</script>
	</body>
</html>